function e(e){return e&&e.__esModule?e.default:e}var t,n={};n=function(){/* eslint-disable no-var */function e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}/* eslint-enable no-var */return /* eslint-enable no-var *//* eslint-disable no-var */function t(n,r){function a(t,a,o){if("undefined"!=typeof document){"number"==typeof(o=e({},r,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var u in o)o[u]&&(i+="; "+u,!0!==o[u]&&// Considers RFC 6265 section 5.2:
// ...
// 3.  If the remaining unparsed-attributes contains a %x3B (";")
//     character:
// Consume the characters of the unparsed-attributes up to,
// not including, the first %x3B (";") character.
// ...
(i+="="+o[u].split(";")[0]));return document.cookie=t+"="+n.write(a,t)+i}}return Object.create({set:a,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var t=document.cookie?document.cookie.split("; "):[],r={},a=0;a<t.length;a++){var o=t[a].split("="),i=o.slice(1).join("=");try{var u=decodeURIComponent(o[0]);if(r[u]=n.read(i,u),e===u)break}catch(e){}}return e?r[e]:r}},remove:function(t,n){a(t,"",e({},n,{expires:-1}))},withAttributes:function(n){return t(this.converter,e({},this.attributes,n))},withConverter:function(n){return t(e({},this.converter,n),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(n)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}();const r={CHAT:document.querySelector(".chat"),SETTINGS_BTN:document.querySelector(".chat-btn_settings"),EXIT_BTN:document.querySelector(".chat-btn_exit"),MESSAGE_FORM:document.querySelector(".chat-send_form"),CHAT_SCREEN:document.querySelector(".chat-screen"),CHAT_WINDOW:document.querySelector(".chat__screen-wrapper"),MESSAGE_TEMPLATE:document.querySelector("#message-template"),API:{SERVER_URL:"https://edu.strada.one/api/user",USER_URL:"https://edu.strada.one/api/user/me",MESSAGE_URL:"https://edu.strada.one/api/messages/"}},a={CONTAINER:r.MESSAGE_TEMPLATE.content.querySelector(".chat-message"),SENDER:r.MESSAGE_TEMPLATE.content.querySelector(".message-sender"),TEXT:r.MESSAGE_TEMPLATE.content.querySelector(".message-text"),TIME:r.MESSAGE_TEMPLATE.content.querySelector(".message-time"),INPUT:document.querySelector(".chat-send_input")},o={AUTHORIZATION:{DIALOG:document.querySelector(".authorization"),FORM:document.querySelector(".modal-form_authorization"),EMAIL:document.querySelector(".input-authorization"),BTN_GET:document.querySelector(".authorization-btn_get"),BTN_ENTER:document.querySelector(".authorization-btn_enter")},VERIFICATION:{DIALOG:document.querySelector(".verification"),FORM:document.querySelector(".modal-form_verification"),CODE:document.querySelector(".input-verification"),BTN_ENTER:document.querySelector(".verification-btn")},SETTINGS:{DIALOG:document.querySelector(".settings"),FORM:document.querySelector(".modal-form_settings"),NAME:document.querySelector(".input-settings"),BTN_ENTER:document.querySelector(".settings-btn"),BTN_CLOSE:document.querySelector(".close-settings")}};function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(t.length<e)throw TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function s(e){u(1,arguments);var t=Object.prototype.toString.call(e);return(// Clone the date
e instanceof Date||"object"===i(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):(("string"==typeof e||"[object String]"===t)&&"undefined"!=typeof console&&(// eslint-disable-next-line no-console
console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),// eslint-disable-next-line no-console
console.warn(Error().stack)),new Date(NaN)))}function c(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function l(e){u(1,arguments);var t=s(e),n=t.getUTCDay();return t.setUTCDate(t.getUTCDate()-((n<1?7:0)+n-1)),t.setUTCHours(0,0,0,0),t}function d(e){u(1,arguments);var t=s(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var a=l(r),o=new Date(0);o.setUTCFullYear(n,0,4),o.setUTCHours(0,0,0,0);var i=l(o);return t.getTime()>=a.getTime()?n+1:t.getTime()>=i.getTime()?n:n-1}var m={};function f(e,t){u(1,arguments);var n,r,a,o,i,l,d,f,h=c(null!==(n=null!==(r=null!==(a=null!==(o=null==t?void 0:t.weekStartsOn)&&void 0!==o?o:null==t?void 0:null===(i=t.locale)||void 0===i?void 0:null===(l=i.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==a?a:m.weekStartsOn)&&void 0!==r?r:null===(d=m.locale)||void 0===d?void 0:null===(f=d.options)||void 0===f?void 0:f.weekStartsOn)&&void 0!==n?n:0);// Test if weekStartsOn is between 0 and 6 _and_ is not NaN
if(!(h>=0&&h<=6))throw RangeError("weekStartsOn must be between 0 and 6 inclusively");var g=s(e),v=g.getUTCDay();return g.setUTCDate(g.getUTCDate()-((v<h?7:0)+v-h)),g.setUTCHours(0,0,0,0),g}function h(e,t){u(1,arguments);var n,r,a,o,i,l,d,h,g=s(e),v=g.getUTCFullYear(),T=c(null!==(n=null!==(r=null!==(a=null!==(o=null==t?void 0:t.firstWeekContainsDate)&&void 0!==o?o:null==t?void 0:null===(i=t.locale)||void 0===i?void 0:null===(l=i.options)||void 0===l?void 0:l.firstWeekContainsDate)&&void 0!==a?a:m.firstWeekContainsDate)&&void 0!==r?r:null===(d=m.locale)||void 0===d?void 0:null===(h=d.options)||void 0===h?void 0:h.firstWeekContainsDate)&&void 0!==n?n:1);// Test if weekStartsOn is between 1 and 7 _and_ is not NaN
if(!(T>=1&&T<=7))throw RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var w=new Date(0);w.setUTCFullYear(v+1,0,T),w.setUTCHours(0,0,0,0);var y=f(w,t),b=new Date(0);b.setUTCFullYear(v,0,T),b.setUTCHours(0,0,0,0);var E=f(b,t);return g.getTime()>=y.getTime()?v+1:g.getTime()>=E.getTime()?v:v-1}function g(e,t){for(var n=Math.abs(e).toString();n.length<t;)n="0"+n;return(e<0?"-":"")+n}var v={// Year
y:function(e,t){// From http://www.unicode.org/reports/tr35/tr35-31/tr35-dates.html#Date_Format_tokens
// | Year     |     y | yy |   yyy |  yyyy | yyyyy |
// |----------|-------|----|-------|-------|-------|
// | AD 1     |     1 | 01 |   001 |  0001 | 00001 |
// | AD 12    |    12 | 12 |   012 |  0012 | 00012 |
// | AD 123   |   123 | 23 |   123 |  0123 | 00123 |
// | AD 1234  |  1234 | 34 |  1234 |  1234 | 01234 |
// | AD 12345 | 12345 | 45 | 12345 | 12345 | 12345 |
var n=e.getUTCFullYear(),r=n>0?n:1-n;return g("yy"===t?r%100:r,t.length)},// Month
M:function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):g(n+1,2)},// Day of the month
d:function(e,t){return g(e.getUTCDate(),t.length)},// AM or PM
a:function(e,t){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},// Hour [1-12]
h:function(e,t){return g(e.getUTCHours()%12||12,t.length)},// Hour [0-23]
H:function(e,t){return g(e.getUTCHours(),t.length)},// Minute
m:function(e,t){return g(e.getUTCMinutes(),t.length)},// Second
s:function(e,t){return g(e.getUTCSeconds(),t.length)},// Fraction of second
S:function(e,t){var n=t.length;return g(Math.floor(e.getUTCMilliseconds()*Math.pow(10,n-3)),t.length)}},T={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"};function w(e,t){var n=e>0?"-":"+",r=Math.abs(e),a=Math.floor(r/60),o=r%60;return 0===o?n+String(a):n+String(a)+(t||"")+g(o,2)}function y(e,t){return e%60==0?(e>0?"-":"+")+g(Math.abs(e)/60,2):b(e,t)}function b(e,t){var n=e>0?"-":"+",r=Math.abs(e);return n+g(Math.floor(r/60),2)+(t||"")+g(r%60,2)}var E={// Era
G:function(e,t,n){var r=e.getUTCFullYear()>0?1:0;switch(t){// AD, BC
case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});// A, B
case"GGGGG":return n.era(r,{width:"narrow"});// Anno Domini, Before Christ
default:return n.era(r,{width:"wide"})}},// Year
y:function(e,t,n){// Ordinal number
if("yo"===t){var r=e.getUTCFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return v.y(e,t)},// Local week-numbering year
Y:function(e,t,n,r){var a=h(e,r),o=a>0?a:1-a;return(// Two digit year
"YY"===t?g(o%100,2):"Yo"===t?n.ordinalNumber(o,{unit:"year"}):g(o,t.length))},// ISO week-numbering year
R:function(e,t){// Padding
return g(d(e),t.length)},// Extended year. This is a single number designating the year of this calendar system.
// The main difference between `y` and `u` localizers are B.C. years:
// | Year | `y` | `u` |
// |------|-----|-----|
// | AC 1 |   1 |   1 |
// | BC 1 |   1 |   0 |
// | BC 2 |   2 |  -1 |
// Also `yy` always returns the last two digits of a year,
// while `uu` pads single digit years to 2 characters and returns other years unchanged.
u:function(e,t){return g(e.getUTCFullYear(),t.length)},// Quarter
Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){// 1, 2, 3, 4
case"Q":return String(r);// 01, 02, 03, 04
case"QQ":return g(r,2);// 1st, 2nd, 3rd, 4th
case"Qo":return n.ordinalNumber(r,{unit:"quarter"});// Q1, Q2, Q3, Q4
case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});// 1, 2, 3, 4 (narrow quarter; could be not numerical)
case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});// 1st quarter, 2nd quarter, ...
default:return n.quarter(r,{width:"wide",context:"formatting"})}},// Stand-alone quarter
q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){// 1, 2, 3, 4
case"q":return String(r);// 01, 02, 03, 04
case"qq":return g(r,2);// 1st, 2nd, 3rd, 4th
case"qo":return n.ordinalNumber(r,{unit:"quarter"});// Q1, Q2, Q3, Q4
case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});// 1, 2, 3, 4 (narrow quarter; could be not numerical)
case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});// 1st quarter, 2nd quarter, ...
default:return n.quarter(r,{width:"wide",context:"standalone"})}},// Month
M:function(e,t,n){var r=e.getUTCMonth();switch(t){case"M":case"MM":return v.M(e,t);// 1st, 2nd, ..., 12th
case"Mo":return n.ordinalNumber(r+1,{unit:"month"});// Jan, Feb, ..., Dec
case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});// J, F, ..., D
case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});// January, February, ..., December
default:return n.month(r,{width:"wide",context:"formatting"})}},// Stand-alone month
L:function(e,t,n){var r=e.getUTCMonth();switch(t){// 1, 2, ..., 12
case"L":return String(r+1);// 01, 02, ..., 12
case"LL":return g(r+1,2);// 1st, 2nd, ..., 12th
case"Lo":return n.ordinalNumber(r+1,{unit:"month"});// Jan, Feb, ..., Dec
case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});// J, F, ..., D
case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});// January, February, ..., December
default:return n.month(r,{width:"wide",context:"standalone"})}},// Local week of year
w:function(e,t,n,r){var a=function(e,t){u(1,arguments);var n=s(e);// Round the number of days to the nearest integer
// because the number of milliseconds in a week is not constant
// (e.g. it's different in the week of the daylight saving time clock shift)
return Math.round((f(n,t).getTime()-(function(e,t){u(1,arguments);var n,r,a,o,i,s,l,d,g=c(null!==(n=null!==(r=null!==(a=null!==(o=null==t?void 0:t.firstWeekContainsDate)&&void 0!==o?o:null==t?void 0:null===(i=t.locale)||void 0===i?void 0:null===(s=i.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==a?a:m.firstWeekContainsDate)&&void 0!==r?r:null===(l=m.locale)||void 0===l?void 0:null===(d=l.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==n?n:1),v=h(e,t),T=new Date(0);return T.setUTCFullYear(v,0,g),T.setUTCHours(0,0,0,0),f(T,t)})(n,t).getTime())/6048e5)+1}(e,r);return"wo"===t?n.ordinalNumber(a,{unit:"week"}):g(a,t.length)},// ISO week of year
I:function(e,t,n){var r=function(e){u(1,arguments);var t=s(e);// Round the number of days to the nearest integer
// because the number of milliseconds in a week is not constant
// (e.g. it's different in the week of the daylight saving time clock shift)
return Math.round((l(t).getTime()-(function(e){u(1,arguments);var t=d(e),n=new Date(0);return n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0),l(n)})(t).getTime())/6048e5)+1}(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):g(r,t.length)},// Day of the month
d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):v.d(e,t)},// Day of year
D:function(e,t,n){var r=function(e){u(1,arguments);var t=s(e),n=t.getTime();return t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0),Math.floor((n-t.getTime())/864e5)+1}(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):g(r,t.length)},// Day of week
E:function(e,t,n){var r=e.getUTCDay();switch(t){// Tue
case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});// T
case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});// Tu
case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});// Tuesday
default:return n.day(r,{width:"wide",context:"formatting"})}},// Local day of week
e:function(e,t,n,r){var a=e.getUTCDay(),o=(a-r.weekStartsOn+8)%7||7;switch(t){// Numerical value (Nth day of week with current locale or weekStartsOn)
case"e":return String(o);// Padded numerical value
case"ee":return g(o,2);// 1st, 2nd, ..., 7th
case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});// T
case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});// Tu
case"eeeeee":return n.day(a,{width:"short",context:"formatting"});// Tuesday
default:return n.day(a,{width:"wide",context:"formatting"})}},// Stand-alone local day of week
c:function(e,t,n,r){var a=e.getUTCDay(),o=(a-r.weekStartsOn+8)%7||7;switch(t){// Numerical value (same as in `e`)
case"c":return String(o);// Padded numerical value
case"cc":return g(o,t.length);// 1st, 2nd, ..., 7th
case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});// T
case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});// Tu
case"cccccc":return n.day(a,{width:"short",context:"standalone"});// Tuesday
default:return n.day(a,{width:"wide",context:"standalone"})}},// ISO day of week
i:function(e,t,n){var r=e.getUTCDay(),a=0===r?7:r;switch(t){// 2
case"i":return String(a);// 02
case"ii":return g(a,t.length);// 2nd
case"io":return n.ordinalNumber(a,{unit:"day"});// Tue
case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});// T
case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});// Tu
case"iiiiii":return n.day(r,{width:"short",context:"formatting"});// Tuesday
default:return n.day(r,{width:"wide",context:"formatting"})}},// AM or PM
a:function(e,t,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},// AM, PM, midnight, noon
b:function(e,t,n){var r,a=e.getUTCHours();switch(r=12===a?T.noon:0===a?T.midnight:a/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},// in the morning, in the afternoon, in the evening, at night
B:function(e,t,n){var r,a=e.getUTCHours();switch(r=a>=17?T.evening:a>=12?T.afternoon:a>=4?T.morning:T.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},// Hour [1-12]
h:function(e,t,n){if("ho"===t){var r=e.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return v.h(e,t)},// Hour [0-23]
H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):v.H(e,t)},// Hour [0-11]
K:function(e,t,n){var r=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):g(r,t.length)},// Hour [1-24]
k:function(e,t,n){var r=e.getUTCHours();return(0===r&&(r=24),"ko"===t)?n.ordinalNumber(r,{unit:"hour"}):g(r,t.length)},// Minute
m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):v.m(e,t)},// Second
s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):v.s(e,t)},// Fraction of second
S:function(e,t){return v.S(e,t)},// Timezone (ISO-8601. If offset is 0, output is always `'Z'`)
X:function(e,t,n,r){var a=(r._originalDate||e).getTimezoneOffset();if(0===a)return"Z";switch(t){// Hours and optional minutes
case"X":return y(a);// Hours, minutes and optional seconds without `:` delimiter
// Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
// so this token always has the same output as `XX`
case"XXXX":case"XX":// Hours and minutes without `:` delimiter
return b(a);// Hours, minutes and optional seconds with `:` delimiter
// Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
// so this token always has the same output as `XXX`
default:return b(a,":")}},// Timezone (ISO-8601. If offset is 0, output is `'+00:00'` or equivalent)
x:function(e,t,n,r){var a=(r._originalDate||e).getTimezoneOffset();switch(t){// Hours and optional minutes
case"x":return y(a);// Hours, minutes and optional seconds without `:` delimiter
// Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
// so this token always has the same output as `xx`
case"xxxx":case"xx":// Hours and minutes without `:` delimiter
return b(a);// Hours, minutes and optional seconds with `:` delimiter
// Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
// so this token always has the same output as `xxx`
default:return b(a,":")}},// Timezone (GMT)
O:function(e,t,n,r){var a=(r._originalDate||e).getTimezoneOffset();switch(t){// Short
case"O":case"OO":case"OOO":return"GMT"+w(a,":");// Long
default:return"GMT"+b(a,":")}},// Timezone (specific non-location)
z:function(e,t,n,r){var a=(r._originalDate||e).getTimezoneOffset();switch(t){// Short
case"z":case"zz":case"zzz":return"GMT"+w(a,":");// Long
default:return"GMT"+b(a,":")}},// Seconds timestamp
t:function(e,t,n,r){return g(Math.floor((r._originalDate||e).getTime()/1e3),t.length)},// Milliseconds timestamp
T:function(e,t,n,r){return g((r._originalDate||e).getTime(),t.length)}},p=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},S=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},C={p:S,P:function(e,t){var n,r=e.match(/(P+)(p+)?/)||[],a=r[1],o=r[2];if(!o)return p(e,t);switch(a){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",p(a,t)).replace("{{time}}",S(o,t))}},A=["D","DD"],N=["YY","YYYY"];function I(e,t,n){if("YYYY"===e)throw RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===e)throw RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===e)throw RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===e)throw RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var M={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function O(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}var D={date:O({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:O({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:O({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},U={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function R(e){return function(t,n){var r;if("formatting"===(null!=n&&n.context?String(n.context):"standalone")&&e.formattingValues){var a=e.defaultFormattingWidth||e.defaultWidth,o=null!=n&&n.width?String(n.width):a;r=e.formattingValues[o]||e.formattingValues[a]}else{var i=e.defaultWidth,u=null!=n&&n.width?String(n.width):e.defaultWidth;r=e.values[u]||e.values[i]}// @ts-ignore: For some reason TypeScript just don't want to match it, no matter how hard we try. I challenge you to try to remove it!
return r[e.argumentCallback?e.argumentCallback(t):t]}}function k(e){return function(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.width,o=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],i=t.match(o);if(!i)return null;var u=i[0],s=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(s)?function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}(s,function(e){return e.test(u)}):function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}(s,function(e){return e.test(u)});return n=e.valueCallback?e.valueCallback(c):c,{value:n=r.valueCallback?r.valueCallback(n):n,rest:t.slice(u.length)}}}var x={code:"en-US",formatDistance:function(e,t,n){var r,a=M[e];return(r="string"==typeof a?a:1===t?a.one:a.other.replace("{{count}}",t.toString()),null!=n&&n.addSuffix)?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:D,formatRelative:function(e,t,n,r){return U[e]},localize:{ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:R({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:R({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:R({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:R({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:R({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(t={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.match(t.matchPattern);if(!r)return null;var a=r[0],o=e.match(t.parsePattern);if(!o)return null;var i=t.valueCallback?t.valueCallback(o[0]):o[0];return{value:i=n.valueCallback?n.valueCallback(i):i,rest:e.slice(a.length)}}),era:k({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:k({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:k({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:k({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:k({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0/* Sunday */,firstWeekContainsDate:1}},L=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,P=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,H=/^'([^]*?)'?$/,W=/''/g,_=/[a-zA-Z]/;function q(){r.CHAT_SCREEN&&r.CHAT_SCREEN.scrollIntoView({behavior:"smooth",block:"end"})}async function G(e){try{let t=await fetch(r.API.SERVER_URL,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify({email:e})});t.ok||console.log("Error from the server")}catch(e){console.log(e.message)}}async function F(e){try{let t=await fetch(r.API.USER_URL,{method:"GET",headers:{"Content-Type":"application/json; charset=utf-8",Authorization:`Bearer ${e}`}});t.ok||console.log("Error from the server");let n=await t.json();return n}catch(e){return console.log(e.message),!1}}async function Y(t){try{let a=/*@__PURE__*/e(n).get("token"),o=await fetch(r.API.SERVER_URL,{method:"PATCH",headers:{"Content-Type":"application/json; charset=utf-8",Authorization:`Bearer ${a}`},body:JSON.stringify({name:t})});return o.ok||console.log("Error from the server"),await o.json()}catch(e){return console.log(e.message),!1}}async function B(){try{let t=/*@__PURE__*/e(n).get("token"),a=await fetch(r.API.MESSAGE_URL,{method:"GET",headers:{"Content-Type":"application/json; charset=utf-8",Authorization:`Bearer ${t}`}});a.ok||console.log("Error from the server with getMessageHistory");let o=await a.json();return o}catch(e){return console.log(e.message),!1}}function j({userName:t,text:o,time:l,email:d}){let f=d===/*@__PURE__*/e(n).get("email")?"I":"COMPANION";if(!a.SENDER||!a.TEXT||!a.TIME)throw Error("Some required fields are missing!");a.SENDER.textContent=t,a.TEXT.textContent=o,a.TIME.textContent=function(e){let t=new Date(e),n=function(e,t,n){u(2,arguments);var r,a,o,l,d,f,h,g,v,T,w,y,b,p,S,M,O,D,U,R=String(t),k=null!==(a=null!==(o=null==n?void 0:n.locale)&&void 0!==o?o:m.locale)&&void 0!==a?a:x,q=c(null!==(l=null!==(d=null!==(f=null!==(h=null==n?void 0:n.firstWeekContainsDate)&&void 0!==h?h:null==n?void 0:null===(g=n.locale)||void 0===g?void 0:null===(v=g.options)||void 0===v?void 0:v.firstWeekContainsDate)&&void 0!==f?f:m.firstWeekContainsDate)&&void 0!==d?d:null===(T=m.locale)||void 0===T?void 0:null===(w=T.options)||void 0===w?void 0:w.firstWeekContainsDate)&&void 0!==l?l:1);// Test if weekStartsOn is between 1 and 7 _and_ is not NaN
if(!(q>=1&&q<=7))throw RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var G=c(null!==(y=null!==(b=null!==(p=null!==(S=null==n?void 0:n.weekStartsOn)&&void 0!==S?S:null==n?void 0:null===(M=n.locale)||void 0===M?void 0:null===(O=M.options)||void 0===O?void 0:O.weekStartsOn)&&void 0!==p?p:m.weekStartsOn)&&void 0!==b?b:null===(D=m.locale)||void 0===D?void 0:null===(U=D.options)||void 0===U?void 0:U.weekStartsOn)&&void 0!==y?y:0);// Test if weekStartsOn is between 0 and 6 _and_ is not NaN
if(!(G>=0&&G<=6))throw RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!k.localize)throw RangeError("locale must contain localize property");if(!k.formatLong)throw RangeError("locale must contain formatLong property");var F=s(e);if(!function(e){return u(1,arguments),(!!function(e){return u(1,arguments),e instanceof Date||"object"===i(e)&&"[object Date]"===Object.prototype.toString.call(e)}(e)||"number"==typeof e)&&!isNaN(Number(s(e)))}(F))throw RangeError("Invalid time value");// Convert the date in system timezone to the same date in UTC+00:00 timezone.
// This ensures that when UTC functions will be implemented, locales will be compatible with them.
// See an issue about UTC functions: https://github.com/date-fns/date-fns/issues/376
var Y=((r=new Date(Date.UTC(F.getFullYear(),F.getMonth(),F.getDate(),F.getHours(),F.getMinutes(),F.getSeconds(),F.getMilliseconds()))).setUTCFullYear(F.getFullYear()),F.getTime()-r.getTime()),B=function(e,t){return u(2,arguments),function(e,t){u(2,arguments);var n=s(e).getTime(),r=c(t);return new Date(n+r)}(e,-c(t))}(F,Y),j={firstWeekContainsDate:q,weekStartsOn:G,locale:k,_originalDate:F};return R.match(P).map(function(e){var t=e[0];return"p"===t||"P"===t?(0,C[t])(e,k.formatLong):e}).join("").match(L).map(function(r){// Replace two single quote characters with one single quote character
if("''"===r)return"'";var a,o=r[0];if("'"===o)return(a=r.match(H))?a[1].replace(W,"'"):r;var i=E[o];if(i)return null!=n&&n.useAdditionalWeekYearTokens||-1===N.indexOf(r)||I(r,t,String(e)),null!=n&&n.useAdditionalDayOfYearTokens||-1===A.indexOf(r)||I(r,t,String(e)),i(B,r,k.localize,j);if(o.match(_))throw RangeError("Format string contains an unescaped latin alphabet character `"+o+"`");return r}).join("")}(t,"HH:mm");return n}(l),a.CONTAINER&&("I"===f?a.CONTAINER.classList.add("chat-message_user"):(a.CONTAINER.classList.remove("chat-message_user"),a.CONTAINER.classList.add("chat-message_companion")));let h=r.MESSAGE_TEMPLATE.content.cloneNode(!0);return h}let z=[],Z=0;async function X(){let e=await B();"boolean"!=typeof e&&(z=e.messages)}async function Q(){if(!r.CHAT_WINDOW)return;let e=r.CHAT_WINDOW.scrollHeight;await X();let t=z.slice(Z,Z+20).reverse(),n=t.map(e=>{let{user:{email:t,name:n},text:r,updatedAt:a}=e;return j({userName:n,text:r,time:a,email:t})});if(!r.CHAT_SCREEN)return;let a=await Promise.all(n);r.CHAT_SCREEN.prepend(...a);let o=a.filter(e=>void 0!==e);r.CHAT_SCREEN.prepend(...o);let i=r.CHAT_WINDOW.scrollHeight;r.CHAT_WINDOW.scrollTop+=i-e,Z+=20}r.CHAT_WINDOW.addEventListener("scroll",()=>{r.CHAT_WINDOW&&0===r.CHAT_WINDOW.scrollTop&&Q()});let V=null;// * функция парсинга сообщения
async function J(e){try{let t=JSON.parse(e.data),{user:{email:n,name:a},text:o,updatedAt:i}=t,u=await j({userName:a,text:o,time:i,email:n});if(!r.CHAT_SCREEN)return;r.CHAT_SCREEN.append(u),q()}catch(e){console.log(e.message)}}function $(){console.log("WebSocket is closed");let t=/*@__PURE__*/e(n).get("token");return t?setTimeout(()=>K(t),1e3):null}function K(e){try{if(null!==V&&1===V.readyState){console.log("соединение уже открыто");return}(V=new WebSocket(`wss://edu.strada.one/websockets?${e}`)).addEventListener("message",J),V.addEventListener("close",$)}catch(e){console.log(e.message)}}function ee(){if(!V){console.log("!socket");return}V.close()}async function et(e){try{if(e.preventDefault(),!o.AUTHORIZATION.EMAIL)return;let t=o.AUTHORIZATION.EMAIL.value;if(/^(([^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{2,})$/iu.test(t)){if(await G(t),!o.AUTHORIZATION.BTN_ENTER||!o.AUTHORIZATION.BTN_GET)return;o.AUTHORIZATION.EMAIL.classList.toggle("valid-value"),o.AUTHORIZATION.BTN_ENTER.removeAttribute("disabled"),o.AUTHORIZATION.BTN_GET.setAttribute("disabled","true")}else o.AUTHORIZATION.EMAIL.classList.add("invalid-value"),o.AUTHORIZATION.EMAIL.focus(),console.log("Неверный email")}catch(e){console.log(e.message)}}async function en(t){try{if(t.preventDefault(),!o.VERIFICATION.CODE||!o.VERIFICATION.DIALOG||!r.CHAT)return;let a=o.VERIFICATION.CODE.value,i=await F(a);if("object"==typeof i&&null!==i){/*@__PURE__*/e(n).set("token",a,{expires:3}),/*@__PURE__*/e(n).set("email",i.email),/*@__PURE__*/e(n).set("name",i.name);let t=/*@__PURE__*/e(n).get("token");t?K(t):console.log("Ошибка получения токена из куки"),Q(),o.VERIFICATION.DIALOG.close(),r.CHAT.classList.remove("hidden"),q()}else console.log("Ошибка верификации");!function(e){e.reset()}(o.VERIFICATION.FORM)}catch(e){console.log(e.message)}}async function er(t){try{if(t.preventDefault(),!o.SETTINGS.NAME||!o.SETTINGS.DIALOG)return;let r=o.SETTINGS.NAME.value;if(!r.trim()){console.log("Введите имя");return}let a=await Y(r);a&&(/*@__PURE__*/e(n).set("name",r),ee(),console.log("Имя успешно сохранено"),o.SETTINGS.DIALOG.close())}catch(e){console.log(e.message)}}async function ea(e){if(e.preventDefault(),!a.INPUT)return;let t=a.INPUT.value;t.trim()?(!function(e){try{if(!V){console.log("!socket");return}V.send(JSON.stringify({text:e}))}catch(e){console.log(e.message)}}(t),function(e){e.reset()}(r.MESSAGE_FORM),q()):console.log("Введите сообщение")}function eo(){o.AUTHORIZATION.DIALOG&&o.AUTHORIZATION.FORM&&o.AUTHORIZATION.EMAIL&&(o.AUTHORIZATION.DIALOG.showModal(),o.AUTHORIZATION.FORM.reset(),o.AUTHORIZATION.EMAIL.focus())}o.AUTHORIZATION.FORM.addEventListener("submit",et),o.VERIFICATION.FORM.addEventListener("submit",en),o.SETTINGS.FORM.addEventListener("submit",er),r.MESSAGE_FORM.addEventListener("submit",ea),o.AUTHORIZATION.BTN_ENTER.addEventListener("click",function(){var e,t;o.AUTHORIZATION.FORM.reset(),e=o.AUTHORIZATION.DIALOG,t=o.VERIFICATION.DIALOG,e.close(),t.showModal()}),r.SETTINGS_BTN.addEventListener("click",()=>{o.SETTINGS.DIALOG.showModal(),o.SETTINGS.NAME.value=/*@__PURE__*/e(n).get("name")||""}),o.SETTINGS.BTN_CLOSE.addEventListener("click",()=>{o.SETTINGS.DIALOG.close()}),r.EXIT_BTN.addEventListener("click",()=>{r.CHAT&&(eo(),/*@__PURE__*/e(n).remove("token"),/*@__PURE__*/e(n).remove("name"),/*@__PURE__*/e(n).remove("email"),ee(),r.CHAT.classList.add("hidden"))}),document.addEventListener("DOMContentLoaded",function(){let t=/*@__PURE__*/e(n).get("token");r.CHAT&&(t?(K(t),r.CHAT.classList.remove("hidden"),Q()):eo())});//# sourceMappingURL=index.bcf67b9f.js.map

//# sourceMappingURL=index.bcf67b9f.js.map
